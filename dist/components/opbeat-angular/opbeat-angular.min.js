!function t(e,n,r){function o(a,s){if(!n[a]){if(!e[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){var n=e[a][1][t];return o(n?n:t)},l,l.exports,t,e,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){(function(r){!function(o,i){"use strict";"function"==typeof r&&r.amd?r("error-stack-parser",["stackframe"],i):"object"==typeof n?e.exports=i(t("stackframe")):o.ErrorStackParser=i(o.StackFrame)}(this,function(t){"use strict";function e(t,e,n){if("function"==typeof Array.prototype.map)return t.map(e,n);for(var r=new Array(t.length),o=0;o<t.length;o++)r[o]=e.call(n,t[o]);return r}function n(t,e,n){if("function"==typeof Array.prototype.filter)return t.filter(e,n);for(var r=[],o=0;o<t.length;o++)e.call(n,t[o])&&r.push(t[o]);return r}var r=/(^|@)\S+\:\d+/,o=/^\s*at .*(\S+\:\d+|\(native\))/m,i=/^(eval@)?(\[native code\])?$/;return{parse:function(t){if("undefined"!=typeof t.stacktrace||"undefined"!=typeof t["opera#sourceloc"])return this.parseOpera(t);if(t.stack&&t.stack.match(o))return this.parseV8OrIE(t);if(t.stack)return this.parseFFOrSafari(t);throw new Error("Cannot parse given Error object")},extractLocation:function(t){if(-1===t.indexOf(":"))return[t];var e=t.replace(/[\(\)\s]/g,"").split(":"),n=e.pop(),r=e[e.length-1];if(!isNaN(parseFloat(r))&&isFinite(r)){var o=e.pop();return[e.join(":"),o,n]}return[e.join(":"),n,void 0]},parseV8OrIE:function(r){var i=n(r.stack.split("\n"),function(t){return!!t.match(o)},this);return e(i,function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var n=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),r=this.extractLocation(n.pop()),o=n.join(" ")||void 0,i=["eval","<anonymous>"].indexOf(r[0])>-1?void 0:r[0];return new t(o,void 0,i,r[1],r[2],e)},this)},parseFFOrSafari:function(r){var o=n(r.stack.split("\n"),function(t){return!t.match(i)},this);return e(o,function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return new t(e);var n=e.split("@"),r=this.extractLocation(n.pop()),o=n.join("@")||void 0;return new t(o,void 0,r[0],r[1],r[2],e)},this)},parseOpera:function(t){return!t.stacktrace||t.message.indexOf("\n")>-1&&t.message.split("\n").length>t.stacktrace.split("\n").length?this.parseOpera9(t):t.stack?this.parseOpera11(t):this.parseOpera10(t)},parseOpera9:function(e){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,r=e.message.split("\n"),o=[],i=2,a=r.length;a>i;i+=2){var s=n.exec(r[i]);s&&o.push(new t(void 0,void 0,s[2],s[1],void 0,r[i]))}return o},parseOpera10:function(e){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=e.stacktrace.split("\n"),o=[],i=0,a=r.length;a>i;i+=2){var s=n.exec(r[i]);s&&o.push(new t(s[3]||void 0,void 0,s[2],s[1],void 0,r[i]))}return o},parseOpera11:function(o){var i=n(o.stack.split("\n"),function(t){return!!t.match(r)&&!t.match(/^Error created at/)},this);return e(i,function(e){var n,r=e.split("@"),o=this.extractLocation(r.pop()),i=r.shift()||"",a=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;i.match(/\(([^\)]*)\)/)&&(n=i.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var s=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new t(a,s,o[0],o[1],o[2],e)},this)}}})}).call(this,void 0)},{stackframe:7}],2:[function(t,e,n){(function(n,r,o){(function(){"use strict";function i(t){return"function"==typeof t||"object"==typeof t&&null!==t}function a(t){return"function"==typeof t}function s(t){return"object"==typeof t&&null!==t}function c(t){X=t}function u(t){J=t}function l(){return function(){n.nextTick(g)}}function p(){return function(){U(g)}}function f(){var t=0,e=new Q(g),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function h(){var t=new MessageChannel;return t.port1.onmessage=g,function(){t.port2.postMessage(0)}}function d(){return function(){setTimeout(g,1)}}function g(){for(var t=0;G>t;t+=2){var e=nt[t],n=nt[t+1];e(n),nt[t]=void 0,nt[t+1]=void 0}G=0}function v(){try{var e=t,n=e("vertx");return U=n.runOnLoop||n.runOnContext,p()}catch(r){return d()}}function m(){}function y(){return new TypeError("You cannot resolve a promise with itself")}function b(){return new TypeError("A promises callback cannot return that same promise.")}function w(t){try{return t.then}catch(e){return at.error=e,at}}function _(t,e,n,r){try{t.call(e,n,r)}catch(o){return o}}function k(t,e,n){J(function(t){var r=!1,o=_(n,e,function(n){r||(r=!0,e!==n?x(t,n):O(t,n))},function(e){r||(r=!0,F(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,F(t,o))},t)}function T(t,e){e._state===ot?O(t,e._result):e._state===it?F(t,e._result):P(e,void 0,function(e){x(t,e)},function(e){F(t,e)})}function S(t,e){if(e.constructor===t.constructor)T(t,e);else{var n=w(e);n===at?F(t,at.error):void 0===n?O(t,e):a(n)?k(t,e,n):O(t,e)}}function x(t,e){t===e?F(t,y()):i(e)?S(t,e):O(t,e)}function E(t){t._onerror&&t._onerror(t._result),C(t)}function O(t,e){t._state===rt&&(t._result=e,t._state=ot,0!==t._subscribers.length&&J(C,t))}function F(t,e){t._state===rt&&(t._state=it,t._result=e,J(E,t))}function P(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+ot]=n,o[i+it]=r,0===i&&t._state&&J(C,t)}function C(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,o,i=t._result,a=0;a<e.length;a+=3)r=e[a],o=e[a+n],r?N(n,r,o,i):o(i);t._subscribers.length=0}}function L(){this.error=null}function j(t,e){try{return t(e)}catch(n){return st.error=n,st}}function N(t,e,n,r){var o,i,s,c,u=a(n);if(u){if(o=j(n,r),o===st?(c=!0,i=o.error,o=null):s=!0,e===o)return void F(e,b())}else o=r,s=!0;e._state!==rt||(u&&s?x(e,o):c?F(e,i):t===ot?O(e,o):t===it&&F(e,o))}function I(t,e){try{e(function(e){x(t,e)},function(e){F(t,e)})}catch(n){F(t,n)}}function D(t,e){var n=this;n._instanceConstructor=t,n.promise=new t(m),n._validateInput(e)?(n._input=e,n.length=e.length,n._remaining=e.length,n._init(),0===n.length?O(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&O(n.promise,n._result))):F(n.promise,n._validationError())}function A(t){return new ct(this,t).promise}function M(t){function e(t){x(o,t)}function n(t){F(o,t)}var r=this,o=new r(m);if(!V(t))return F(o,new TypeError("You must pass an array to race.")),o;for(var i=t.length,a=0;o._state===rt&&i>a;a++)P(r.resolve(t[a]),void 0,e,n);return o}function z(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(m);return x(n,t),n}function R(t){var e=this,n=new e(m);return F(n,t),n}function H(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function $(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function Z(t){this._id=ht++,this._state=void 0,this._result=void 0,this._subscribers=[],m!==t&&(a(t)||H(),this instanceof Z||$(),I(this,t))}function q(){var t;if("undefined"!=typeof r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;(!n||"[object Promise]"!==Object.prototype.toString.call(n.resolve())||n.cast)&&(t.Promise=dt)}var B;B=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var U,X,W,V=B,G=0,J=({}.toString,function(t,e){nt[G]=t,nt[G+1]=e,G+=2,2===G&&(X?X(g):W())}),K="undefined"!=typeof window?window:void 0,Y=K||{},Q=Y.MutationObserver||Y.WebKitMutationObserver,tt="undefined"!=typeof n&&"[object process]"==={}.toString.call(n),et="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,nt=new Array(1e3);W=tt?l():Q?f():et?h():void 0===K&&"function"==typeof t?v():d();var rt=void 0,ot=1,it=2,at=new L,st=new L;D.prototype._validateInput=function(t){return V(t)},D.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},D.prototype._init=function(){this._result=new Array(this.length)};var ct=D;D.prototype._enumerate=function(){for(var t=this,e=t.length,n=t.promise,r=t._input,o=0;n._state===rt&&e>o;o++)t._eachEntry(r[o],o)},D.prototype._eachEntry=function(t,e){var n=this,r=n._instanceConstructor;s(t)?t.constructor===r&&t._state!==rt?(t._onerror=null,n._settledAt(t._state,e,t._result)):n._willSettleAt(r.resolve(t),e):(n._remaining--,n._result[e]=t)},D.prototype._settledAt=function(t,e,n){var r=this,o=r.promise;o._state===rt&&(r._remaining--,t===it?F(o,n):r._result[e]=n),0===r._remaining&&O(o,r._result)},D.prototype._willSettleAt=function(t,e){var n=this;P(t,void 0,function(t){n._settledAt(ot,e,t)},function(t){n._settledAt(it,e,t)})};var ut=A,lt=M,pt=z,ft=R,ht=0,dt=Z;Z.all=ut,Z.race=lt,Z.resolve=pt,Z.reject=ft,Z._setScheduler=c,Z._setAsap=u,Z._asap=J,Z.prototype={constructor:Z,then:function(t,e){var n=this,r=n._state;if(r===ot&&!t||r===it&&!e)return this;var o=new this.constructor(m),i=n._result;if(r){var a=arguments[r-1];J(function(){N(r,o,a,i)})}else P(n,o,t,e);return o},"catch":function(t){return this.then(null,t)}};var gt=q,vt={Promise:dt,polyfill:gt};"function"==typeof o&&o.amd?o(function(){return vt}):"undefined"!=typeof e&&e.exports?e.exports=vt:"undefined"!=typeof this&&(this.ES6Promise=vt),gt()}).call(this)}).call(this,void 0,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},void 0)},{}],3:[function(t,e,n){(function(n){!function(r,o){"use strict";"object"==typeof e&&e.exports&&"function"==typeof t?e.exports=o():"function"==typeof n&&"object"==typeof n.amd?n(o):r.log=o()}(this,function(){"use strict";function t(t){return typeof console===s?!1:void 0!==console[t]?e(console,t):void 0!==console.log?e(console,"log"):a}function e(t,e){var n=t[e];if("function"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(r){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function n(t,e,n){return function(){typeof console!==s&&(r.call(this,e,n),this[t].apply(this,arguments))}}function r(t,e){for(var n=0;n<c.length;n++){var r=c[n];this[r]=t>n?a:this.methodFactory(r,t,e)}}function o(e,r,o){return t(e)||n.apply(this,arguments)}function i(t,e,n){function i(t){var e=(c[t]||"silent").toUpperCase();try{return void(window.localStorage[p]=e)}catch(n){}try{window.document.cookie=encodeURIComponent(p)+"="+e+";"}catch(n){}}function a(){var t;try{t=window.localStorage[p]}catch(e){}if(typeof t===s)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(p)+"=");r&&(t=/^([^;]+)/.exec(n.slice(r))[1])}catch(e){}return void 0===l.levels[t]&&(t=void 0),t}var u,l=this,p="loglevel";t&&(p+=":"+t),l.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},l.methodFactory=n||o,l.getLevel=function(){return u},l.setLevel=function(e,n){if("string"==typeof e&&void 0!==l.levels[e.toUpperCase()]&&(e=l.levels[e.toUpperCase()]),!("number"==typeof e&&e>=0&&e<=l.levels.SILENT))throw"log.setLevel() called with invalid level: "+e;return u=e,n!==!1&&i(e),r.call(l,e,t),typeof console===s&&e<l.levels.SILENT?"No console available for logging":void 0},l.setDefaultLevel=function(t){a()||l.setLevel(t,!1)},l.enableAll=function(t){l.setLevel(l.levels.TRACE,t)},l.disableAll=function(t){l.setLevel(l.levels.SILENT,t)};var f=a();null==f&&(f=null==e?"WARN":e),l.setLevel(f,!1)}var a=function(){},s="undefined",c=["trace","debug","info","warn","error"],u=new i,l={};u.getLogger=function(t){if("string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=l[t];return e||(e=l[t]=new i(t,u.getLevel(),u.methodFactory)),e};var p=typeof window!==s?window.log:void 0;return u.noConflict=function(){return typeof window!==s&&window.log===u&&(window.log=p),u},u})}).call(this,void 0)},{}],4:[function(t,e,n){e.exports=t("./lib/simple_lru.js")},{"./lib/simple_lru.js":5}],5:[function(t,e,n){"use strict";function r(t,e,n,r){this.before=t,this.next=e,this.key=n,this.value=r}function o(t){t||(t={}),this.maxSize=t.maxSize,this.reset()}r.prototype.setKey=function(t){this.key=t},r.prototype.setValue=function(t){this.value=t},o.prototype.reset=function(){this.size=0,this.cache={},this.tail=void 0,this.head=void 0},o.prototype.get=function(t,e){var n=this.cache[t];return e=void 0!=e&&null!=e?e:!0,n&&e?(this.hit(n),n.value):void 0},o.prototype.set=function(t,e,n){var o=this.cache[t];if(n=void 0!=n&&null!=n?n:!0,o)o.value=e,n&&this.hit(o);else{var i;if(this.size>=this.maxSize){var a=this.tail.key;this.detach(this.tail),i=this.cache[a],delete this.cache[a],i.next=void 0,i.before=void 0,i.setKey(t),i.setValue(e)}i=i?i:new r(void 0,void 0,t,e),this.cache[t]=i,this.attach(i)}},o.prototype.del=function(t){var e=this.cache[t];e&&(this.detach(e),delete this.cache[t])},o.prototype.hit=function(t){this.detach(t),this.attach(t)},o.prototype.attach=function(t){t&&(t.before=void 0,t.next=this.head,this.head=t,t.next?t.next.before=t:this.tail=t,this.size++)},o.prototype.detach=function(t){if(t){var e=t.before,n=t.next;e?e.next=n:this.head=n,n?n.before=e:this.tail=e,this.size--}},o.prototype.forEach=function(t){var e=this;Object.keys(this.cache).forEach(function(n){var r=e.cache[n];t(r.value,n)})},e.exports=o},{}],6:[function(t,e,n){(function(r){!function(o,i){"use strict";"function"==typeof r&&r.amd?r("stack-generator",["stackframe"],i):"object"==typeof n?e.exports=i(t("stackframe")):o.StackGenerator=i(o.StackFrame)}(this,function(t){return{backtrace:function(e){var n=[],r=10;"object"==typeof e&&"number"==typeof e.maxStackSize&&(r=e.maxStackSize);for(var o=arguments.callee;o&&n.length<r;){for(var i=new Array(o.arguments.length),a=0;a<i.length;++a)i[a]=o.arguments[a];/function(?:\s+([\w$]+))+\s*\(/.test(o.toString())?n.push(new t(RegExp.$1||void 0,i)):n.push(new t(void 0,i));try{o=o.caller}catch(s){break}}return n}}})}).call(this,void 0)},{stackframe:7}],7:[function(t,e,n){(function(t){!function(r,o){"use strict";"function"==typeof t&&t.amd?t("stackframe",[],o):"object"==typeof n?e.exports=o():r.StackFrame=o()}(this,function(){"use strict";function t(t){return!isNaN(parseFloat(t))&&isFinite(t)}function e(t,e,n,r,o,i){void 0!==t&&this.setFunctionName(t),void 0!==e&&this.setArgs(e),void 0!==n&&this.setFileName(n),void 0!==r&&this.setLineNumber(r),void 0!==o&&this.setColumnNumber(o),void 0!==i&&this.setSource(i)}return e.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(t){this.functionName=String(t)},getArgs:function(){return this.args},setArgs:function(t){if("[object Array]"!==Object.prototype.toString.call(t))throw new TypeError("Args must be an Array");this.args=t},getFileName:function(){return this.fileName},setFileName:function(t){this.fileName=String(t)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(e){if(!t(e))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(e)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(e){if(!t(e))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(e)},getSource:function(){return this.source},setSource:function(t){this.source=String(t)},toString:function(){var e=this.getFunctionName()||"{anonymous}",n="("+(this.getArgs()||[]).join(",")+")",r=this.getFileName()?"@"+this.getFileName():"",o=t(this.getLineNumber())?":"+this.getLineNumber():"",i=t(this.getColumnNumber())?":"+this.getColumnNumber():"";return e+n+r+o+i}},e})}).call(this,void 0)},{}],8:[function(t,e,n){(function(t){!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){(function(t){"use strict";function e(t){function e(t){var e=t[g];return e}function n(t){var e=t.data;e.target.addEventListener("readystatechange",function(){e.target.readyState===XMLHttpRequest.DONE&&(e.aborted||t.invoke())});var n=e.target[g];return n||(e.target[g]=t),i.apply(e.target,e.args),t}function r(){}function o(t){var e=t.data;return e.aborted=!0,a.apply(e.target,e.args)}var i=c.patchMethod(t.XMLHttpRequest.prototype,"send",function(){return function(t,e){var i=Zone.current,a={target:t,isPeriodic:!1,delay:null,args:e,aborted:!1};return i.scheduleMacroTask("XMLHttpRequest.send",r,a,n,o)}}),a=c.patchMethod(t.XMLHttpRequest.prototype,"abort",function(t){return function(t,n){var r=e(t);if(r&&"string"==typeof r.type){if(null==r.cancelFn)return;r.zone.cancelTask(r)}}})}n(1);var r=n(2),o=n(4),i=n(5),a=n(6),s=n(8),c=n(3),u="set",l="clear",p=["alert","prompt","confirm"],f="undefined"==typeof window?t:window;s.patchTimer(f,u,l,"Timeout"),s.patchTimer(f,u,l,"Interval"),s.patchTimer(f,u,l,"Immediate"),s.patchTimer(f,"request","cancel","AnimationFrame"),s.patchTimer(f,"mozRequest","mozCancel","AnimationFrame"),s.patchTimer(f,"webkitRequest","webkitCancel","AnimationFrame");for(var h=0;h<p.length;h++){var d=p[h];c.patchMethod(f,d,function(t,e,n){return function(e,r){return Zone.current.run(t,f,r,n)}})}r.eventTargetPatch(f),a.propertyDescriptorPatch(f),c.patchClass("MutationObserver"),c.patchClass("WebKitMutationObserver"),c.patchClass("FileReader"),o.propertyPatch(),i.registerElementPatch(f),e(f);var g=c.zoneSymbol("xhrTask");f.navigator&&f.navigator.geolocation&&c.patchPrototype(f.navigator.geolocation,["getCurrentPosition","watchPosition"])}).call(e,function(){return this}())},function(t,e){(function(t){(function(t){function e(t){return"__zone_symbol__"+t}function n(){S||w||0!=_.length||(t[m]?t[m].resolve(0)[y](i):t[v](i,0))}function r(t){n(),_.push(t)}function o(t){var e=t&&t.rejection;e&&console.error("Unhandled Promise rejection:",e instanceof Error?e.message:e,"; Zone:",t.zone.name,"; Task:",t.task&&t.task.source,"; Value:",e),console.error(t)}function i(){if(!k){for(k=!0;_.length;){var t=_;_=[];for(var e=0;e<t.length;e++){var n=t[e];try{n.zone.runTask(n,null,null)}catch(r){o(r)}}}for(;T.length;){var i=T;T=[];for(var a=function(t){var e=i[t];try{e.zone.runGuarded(function(){throw e})}catch(n){o(n)}},e=0;e<i.length;e++)a(e)}k=!1,S=!1}}function a(t){return t&&t.then}function s(t){return t}function c(t){return j.reject(t)}function u(t,e){return function(n){l(t,e,n)}}function l(t,e,r){if(t[x]===F)if(r instanceof j&&r[x]!==F)p(r),l(t,r[x],r[E]);else if(a(r))r.then(u(t,e),u(t,!1));else{t[x]=e;var o=t[E];t[E]=r;for(var i=0;i<o.length;)f(t,o[i++],o[i++],o[i++],o[i++]);if(0==o.length&&e==C){t[x]=L;try{throw new Error("Uncaught (in promise): "+r)}catch(s){var c=s;c.rejection=r,c.promise=t,c.zone=h.current,c.task=h.currentTask,T.push(c),n()}}}return t}function p(t){if(t[x]===L){t[x]=C;for(var e=0;e<T.length;e++)if(t===T[e].promise){T.splice(e,1);break}}}function f(t,e,n,r,o){p(t);var i=t[x]?r||s:o||c;e.scheduleMicroTask(O,function(){try{l(n,!0,e.run(i,null,[t[E]]))}catch(r){l(n,!1,r)}})}var h=function(){function t(t,e){this._properties=null,this._parent=t,this._name=e?e.name||"unnamed":"<root>",this._properties=e&&e.properties||{},this._zoneDelegate=new d(this,this._parent&&this._parent._zoneDelegate,e)}return Object.defineProperty(t,"current",{get:function(){return b},enumerable:!0,configurable:!0}),Object.defineProperty(t,"currentTask",{get:function(){return w},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),t.prototype.get=function(t){for(var e=this;e;){if(e._properties.hasOwnProperty(t))return e._properties[t];e=e._parent}},t.prototype.fork=function(t){if(!t)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,t)},t.prototype.wrap=function(t,e){if("function"!=typeof t)throw new Error("Expecting function got: "+t);var n=this._zoneDelegate.intercept(this,t,e),r=this;return function(){return r.runGuarded(n,this,arguments,e)}},t.prototype.run=function(t,e,n,r){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=null);var o=b;b=this;try{return this._zoneDelegate.invoke(this,t,e,n,r)}finally{b=o}},t.prototype.runGuarded=function(t,e,n,r){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=null);var o=b;b=this;try{try{return this._zoneDelegate.invoke(this,t,e,n,r)}catch(i){if(this._zoneDelegate.handleError(this,i))throw i}}finally{b=o}},t.prototype.runTask=function(t,e,n){if(t.runCount++,t.zone!=this)throw new Error("A task can only be run in the zone which created it! (Creation: "+t.zone.name+"; Execution: "+this.name+")");var r=w;w=t;var o=b;b=this;try{"macroTask"==t.type&&t.data&&!t.data.isPeriodic&&(t.cancelFn=null);try{return this._zoneDelegate.invokeTask(this,t,e,n)}catch(i){if(this._zoneDelegate.handleError(this,i))throw i}}finally{b=o,w=r}},t.prototype.scheduleMicroTask=function(t,e,n,r){return this._zoneDelegate.scheduleTask(this,new g("microTask",this,t,e,n,r,null))},t.prototype.scheduleMacroTask=function(t,e,n,r,o){return this._zoneDelegate.scheduleTask(this,new g("macroTask",this,t,e,n,r,o))},t.prototype.scheduleEventTask=function(t,e,n,r,o){return this._zoneDelegate.scheduleTask(this,new g("eventTask",this,t,e,n,r,o))},t.prototype.cancelTask=function(t){var e=this._zoneDelegate.cancelTask(this,t);return t.runCount=-1,t.cancelFn=null,e},t.__symbol__=e,t}(),d=function(){function t(t,e,n){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=t,this._parentDelegate=e,this._forkZS=n&&(n&&n.onFork?n:e._forkZS),this._forkDlgt=n&&(n.onFork?e:e._forkDlgt),this._interceptZS=n&&(n.onIntercept?n:e._interceptZS),this._interceptDlgt=n&&(n.onIntercept?e:e._interceptDlgt),this._invokeZS=n&&(n.onInvoke?n:e._invokeZS),this._invokeDlgt=n&&(n.onInvoke?e:e._invokeDlgt),this._handleErrorZS=n&&(n.onHandleError?n:e._handleErrorZS),this._handleErrorDlgt=n&&(n.onHandleError?e:e._handleErrorDlgt),this._scheduleTaskZS=n&&(n.onScheduleTask?n:e._scheduleTaskZS),this._scheduleTaskDlgt=n&&(n.onScheduleTask?e:e._scheduleTaskDlgt),this._invokeTaskZS=n&&(n.onInvokeTask?n:e._invokeTaskZS),this._invokeTaskDlgt=n&&(n.onInvokeTask?e:e._invokeTaskDlgt),this._cancelTaskZS=n&&(n.onCancelTask?n:e._cancelTaskZS),this._cancelTaskDlgt=n&&(n.onCancelTask?e:e._cancelTaskDlgt),this._hasTaskZS=n&&(n.onHasTask?n:e._hasTaskZS),this._hasTaskDlgt=n&&(n.onHasTask?e:e._hasTaskDlgt)}return t.prototype.fork=function(t,e){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,t,e):new h(t,e)},t.prototype.intercept=function(t,e,n){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this.zone,t,e,n):e},t.prototype.invoke=function(t,e,n,r,o){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this.zone,t,e,n,r,o):e.apply(n,r)},t.prototype.handleError=function(t,e){return this._handleErrorZS?this._handleErrorZS.onHandleError(this._handleErrorDlgt,this.zone,t,e):!0},t.prototype.scheduleTask=function(t,e){try{if(this._scheduleTaskZS)return this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this.zone,t,e);if(e.scheduleFn)e.scheduleFn(e);else{if("microTask"!=e.type)throw new Error("Task is missing scheduleFn.");r(e)}return e}finally{t==this.zone&&this._updateTaskCount(e.type,1)}},t.prototype.invokeTask=function(t,e,n,r){try{return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this.zone,t,e,n,r):e.callback.apply(n,r)}finally{t!=this.zone||"eventTask"==e.type||e.data&&e.data.isPeriodic||this._updateTaskCount(e.type,-1)}},t.prototype.cancelTask=function(t,e){var n;if(this._cancelTaskZS)n=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this.zone,t,e);else{if(!e.cancelFn)throw new Error("Task does not support cancellation, or is already canceled.");n=e.cancelFn(e)}return t==this.zone&&this._updateTaskCount(e.type,-1),n},t.prototype.hasTask=function(t,e){return this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this.zone,t,e)},t.prototype._updateTaskCount=function(t,e){var n=this._taskCounts,r=n[t],o=n[t]=r+e;if(0>o)throw new Error("More tasks executed then were scheduled.");if(0==r||0==o){var i={microTask:n.microTask>0,macroTask:n.macroTask>0,eventTask:n.eventTask>0,change:t};try{this.hasTask(this.zone,i)}finally{this._parentDelegate&&this._parentDelegate._updateTaskCount(t,e)}}},t}(),g=function(){function t(t,e,n,r,o,a,s){this.runCount=0,this.type=t,this.zone=e,this.source=n,this.data=o,this.scheduleFn=a,this.cancelFn=s,this.callback=r;var c=this;this.invoke=function(){try{return e.runTask(c,this,arguments)}finally{i()}}}return t.prototype.toString=function(){return this.data&&"undefined"!=typeof this.data.handleId?this.data.handleId:this.toString()},t}(),v=e("setTimeout"),m=e("Promise"),y=e("then"),b=new h(null,null),w=null,_=[],k=!1,T=[],S=!1,x=e("state"),E=e("value"),O="Promise.then",F=null,P=!0,C=!1,L=0,j=function(){function t(t){var e=this;e[x]=F,e[E]=[];try{t&&t(u(e,P),u(e,C))}catch(n){l(e,!1,n)}}return t.resolve=function(t){return l(new this(null),P,t)},t.reject=function(t){return l(new this(null),C,t)},t.race=function(t){function e(t){i&&(i=r(t))}function n(t){i&&(i=o(t))}for(var r,o,i=new this(function(t,e){r=t,o=e}),s=0,c=t;s<c.length;s++){var u=c[s];a(u)||(u=this.resolve(u)),u.then(e,n)}return i},t.all=function(t){function e(t){o&&r(t),o=null}for(var n,r,o=new this(function(t,e){n=t,r=e}),i=0,s=[],c=0,u=t;c<u.length;c++){var l=u[c];a(l)||(l=this.resolve(l)),l.then(function(t){return function(e){s[t]=e,i--,o&&!i&&n(s)}}(i),e),i++}return i||n(s),o},t.prototype.then=function(e,n){var r=new t(null),o=h.current;return this[x]==F?this[E].push(o,r,e,n):f(this,o,r,e,n),r},t.prototype["catch"]=function(t){return this.then(null,t)},t}(),N=t[e("Promise")]=t.Promise;if(t.Promise=j,N){var I=N.prototype,D=I[e("then")]=I.then;I.then=function(t,e){var n=this;return new j(function(t,e){D.call(n,t,e)}).then(t,e)}}return t.Zone=h})("undefined"==typeof window?t:window)}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t){var e=[],n=t.wtf;n?e=i.split(",").map(function(t){return"HTML"+t+"Element"}).concat(a):t[s]?e.push(s):e=a;for(var r=0;r<e.length;r++){var c=t[e[r]];o.patchEventTargetMethods(c&&c.prototype)}}var o=n(3),i="Anchor,Area,Audio,BR,Base,BaseFont,Body,Button,Canvas,Content,DList,Directory,Div,Embed,FieldSet,Font,Form,Frame,FrameSet,HR,Head,Heading,Html,IFrame,Image,Input,Keygen,LI,Label,Legend,Link,Map,Marquee,Media,Menu,Meta,Meter,Mod,OList,Object,OptGroup,Option,Output,Paragraph,Pre,Progress,Quote,Script,Select,Source,Span,Style,TableCaption,TableCell,TableCol,Table,TableRow,TableSection,TextArea,Title,Track,UList,Unknown,Video",a="ApplicationCache,EventSource,FileReader,InputMethodContext,MediaController,MessagePort,Node,Performance,SVGElementInstance,SharedWorker,TextTrack,TextTrackCue,TextTrackList,WebKitNamedFlow,Window,Worker,WorkerGlobalScope,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload,IDBRequest,IDBOpenDBRequest,IDBDatabase,IDBTransaction,IDBCursor,DBIndex".split(","),s="EventTarget";e.eventTargetPatch=r},function(e,n){(function(e){"use strict";function r(t,e){for(var n=t.length-1;n>=0;n--)"function"==typeof t[n]&&(t[n]=Zone.current.wrap(t[n],e+"_"+n));return t}function o(t,e){for(var n=t.constructor.name,o=function(o){var i=e[o],a=t[i];a&&(t[i]=function(t){return function(){return t.apply(this,r(arguments,n+"."+i))}}(a))},i=0;i<e.length;i++)o(i)}function i(t,e){var n=Object.getOwnPropertyDescriptor(t,e)||{enumerable:!0,configurable:!0};delete n.writable,delete n.value;var r=e.substr(2),o="_"+e;n.set=function(t){if(this[o]&&this.removeEventListener(r,this[o]),"function"==typeof t){var e=function(e){var n;n=t.apply(this,arguments),void 0==n||n||e.preventDefault()};this[o]=e,this.addEventListener(r,e,!1)}else this[o]=null},n.get=function(){return this[o]},Object.defineProperty(t,e,n)}function a(t,e){var n=[];for(var r in t)"on"==r.substr(0,2)&&n.push(r);for(var o=0;o<n.length;o++)i(t,n[o]);if(e)for(var a=0;a<e.length;a++)i(t,"on"+e[a])}function s(t,e,n,r,o){var i=t[y];if(i)for(var a=0;a<i.length;a++){var s=i[a],c=s.data;if(c.handler===e&&c.useCapturing===r&&c.eventName===n)return o&&i.splice(a,1),s}return null}function c(t,e){var n=t[y];n||(n=t[y]=[]),n.push(e)}function u(t){var e=t.data;return c(e.target,t),e.target[_](e.eventName,t.invoke,e.useCapturing)}function l(t){var e=t.data;s(e.target,t.invoke,e.eventName,e.useCapturing,!0),e.target[k](e.eventName,t.invoke,e.useCapturing)}function p(t,e){var n=e[0],r=e[1],o=e[2]||!1,i=t||m,a=null;"function"==typeof r?a=r:r&&r.handleEvent&&(a=function(t){return r.handleEvent(t)});var c=!1;try{c=r&&"[object FunctionWrapper]"===r.toString()}catch(p){return}if(!a||c)return i[_](n,r,o);var f=s(i,r,n,o,!1);if(f)return i[_](n,f.invoke,o);var h=Zone.current,d=i.constructor.name+".addEventListener:"+n,g={target:i,eventName:n,name:n,useCapturing:o,handler:r};h.scheduleEventTask(d,a,g,u,l)}function f(t,e){var n=e[0],r=e[1],o=e[2]||!1,i=t||m,a=s(i,r,n,o,!0);a?a.zone.cancelTask(a):i[k](n,r,o)}function h(t){return t&&t.addEventListener?(v(t,b,function(){return p}),v(t,w,function(){return f}),!0):!1}function d(t){var e=m[t];if(e){m[t]=function(){var n=r(arguments,t);switch(n.length){case 0:this[T]=new e;break;case 1:this[T]=new e(n[0]);break;case 2:this[T]=new e(n[0],n[1]);break;case 3:this[T]=new e(n[0],n[1],n[2]);break;case 4:this[T]=new e(n[0],n[1],n[2],n[3]);break;default:throw new Error("Arg list too long.")}};var n,o=new e(function(){});for(n in o)("XMLHttpRequest"!==t||"responseBlob"!==n)&&!function(e){"function"==typeof o[e]?m[t].prototype[e]=function(){return this[T][e].apply(this[T],arguments)}:Object.defineProperty(m[t].prototype,e,{set:function(n){"function"==typeof n?this[T][e]=Zone.current.wrap(n,t+"."+e):this[T][e]=n},get:function(){return this[T][e]}})}(n);for(n in e)"prototype"!==n&&e.hasOwnProperty(n)&&(m[t][n]=e[n])}}function g(t,e){try{return Function("f","return function "+t+"(){return f(this, arguments)}")(e)}catch(n){return function(){return e(this,arguments)}}}function v(t,e,r){for(var o=t;o&&!o.hasOwnProperty(e);)o=Object.getPrototypeOf(o);!o&&t[e]&&(o=t);var i,a=n.zoneSymbol(e);return o&&!(i=o[a])&&(i=o[a]=o[e],o[e]=g(e,r(i,a,e))),i}n.zoneSymbol=Zone.__symbol__;var m="undefined"==typeof window?e:window;n.bindArguments=r,n.patchPrototype=o,n.isWebWorker="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,n.isNode="undefined"!=typeof t&&"[object process]"==={}.toString.call(t),n.isBrowser=!n.isNode&&!n.isWebWorker&&!("undefined"==typeof window||!window.HTMLElement),n.patchProperty=i,n.patchOnProperties=a;var y=n.zoneSymbol("eventTasks"),b="addEventListener",w="removeEventListener",_=n.zoneSymbol(b),k=n.zoneSymbol(w);n.patchEventTargetMethods=h;var T=n.zoneSymbol("originalInstance");n.patchClass=d,n.createNamedFn=g,n.patchMethod=v}).call(n,function(){return this}())},function(t,e,n){"use strict";function r(){Object.defineProperty=function(t,e,n){if(i(t,e))throw new TypeError("Cannot assign to read only property '"+e+"' of "+t);return"prototype"!==e&&(n=a(t,e,n)),c(t,e,n)},Object.defineProperties=function(t,e){return Object.keys(e).forEach(function(n){Object.defineProperty(t,n,e[n])}),t},Object.create=function(t,e){return"object"!=typeof e||Object.isFrozen(e)||Object.keys(e).forEach(function(n){e[n]=a(t,n,e[n])}),l(t,e)},Object.getOwnPropertyDescriptor=function(t,e){var n=u(t,e);return i(t,e)&&(n.configurable=!1),n}}function o(t,e,n){return n=a(t,e,n),c(t,e,n)}function i(t,e){return t&&t[p]&&t[p][e]}function a(t,e,n){return n.configurable=!0,n.configurable||(t[p]||c(t,p,{writable:!0,value:{}}),t[p][e]=!0),n}var s=n(3),c=Object.defineProperty,u=Object.getOwnPropertyDescriptor,l=Object.create,p=s.zoneSymbol("unconfigurables");e.propertyPatch=r,
e._redefineProperty=o},function(t,e,n){"use strict";function r(t){if(i.isBrowser&&"registerElement"in t.document){var e=document.registerElement,n=["createdCallback","attachedCallback","detachedCallback","attributeChangedCallback"];document.registerElement=function(t,r){return r&&r.prototype&&n.forEach(function(t){var e="Document.registerElement::"+t;if(r.prototype.hasOwnProperty(t)){var n=Object.getOwnPropertyDescriptor(r.prototype,t);n&&n.value?(n.value=Zone.current.wrap(n.value,e),o._redefineProperty(r.prototype,t,n)):r.prototype[t]=Zone.current.wrap(r.prototype[t],e)}else r.prototype[t]&&(r.prototype[t]=Zone.current.wrap(r.prototype[t],e))}),e.apply(document,[t,r])}}}var o=n(4),i=n(3);e.registerElementPatch=r},function(t,e,n){"use strict";function r(t){if(!s.isNode){var e="undefined"!=typeof WebSocket;o()?(s.isBrowser&&s.patchOnProperties(HTMLElement.prototype,c),s.patchOnProperties(XMLHttpRequest.prototype,null),"undefined"!=typeof IDBIndex&&(s.patchOnProperties(IDBIndex.prototype,null),s.patchOnProperties(IDBRequest.prototype,null),s.patchOnProperties(IDBOpenDBRequest.prototype,null),s.patchOnProperties(IDBDatabase.prototype,null),s.patchOnProperties(IDBTransaction.prototype,null),s.patchOnProperties(IDBCursor.prototype,null)),e&&s.patchOnProperties(WebSocket.prototype,null)):(i(),s.patchClass("XMLHttpRequest"),e&&a.apply(t))}}function o(){if(s.isBrowser&&!Object.getOwnPropertyDescriptor(HTMLElement.prototype,"onclick")&&"undefined"!=typeof Element){var t=Object.getOwnPropertyDescriptor(Element.prototype,"onclick");if(t&&!t.configurable)return!1}Object.defineProperty(XMLHttpRequest.prototype,"onreadystatechange",{get:function(){return!0}});var e=new XMLHttpRequest,n=!!e.onreadystatechange;return Object.defineProperty(XMLHttpRequest.prototype,"onreadystatechange",{}),n}function i(){for(var t=function(t){var e=c[t],n="on"+e;document.addEventListener(e,function(t){var e,r,o=t.target;for(r=o?o.constructor.name+"."+n:"unknown."+n;o;)o[n]&&!o[n][u]&&(e=Zone.current.wrap(o[n],r),e[u]=o[n],o[n]=e),o=o.parentElement},!0)},e=0;e<c.length;e++)t(e)}var a=n(7),s=n(3),c="copy cut paste abort blur focus canplay canplaythrough change click contextmenu dblclick drag dragend dragenter dragleave dragover dragstart drop durationchange emptied ended input invalid keydown keypress keyup load loadeddata loadedmetadata loadstart message mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup pause play playing progress ratechange reset scroll seeked seeking select show stalled submit suspend timeupdate volumechange waiting mozfullscreenchange mozfullscreenerror mozpointerlockchange mozpointerlockerror error webglcontextrestored webglcontextlost webglcontextcreationerror".split(" ");e.propertyDescriptorPatch=r;var u=s.zoneSymbol("unbound")},function(t,e,n){"use strict";function r(t){var e=t.WebSocket;t.EventTarget||o.patchEventTargetMethods(e.prototype),t.WebSocket=function(t,n){var r,i=arguments.length>1?new e(t,n):new e(t),a=Object.getOwnPropertyDescriptor(i,"onmessage");return a&&a.configurable===!1?(r=Object.create(i),["addEventListener","removeEventListener","send","close"].forEach(function(t){r[t]=function(){return i[t].apply(i,arguments)}})):r=i,o.patchOnProperties(r,["close","error","message","open"]),r};for(var n in e)t.WebSocket[n]=e[n]}var o=n(3);e.apply=r},function(t,e,n){"use strict";function r(t,e,n,r){function i(e){var n=e.data;return n.args[0]=e.invoke,n.handleId=s.apply(t,n.args),e}function a(t){return c(t.data.handleId)}var s=null,c=null;e+=r,n+=r,s=o.patchMethod(t,e,function(n){return function(o,s){if("function"==typeof s[0]){var c=Zone.current,u={handleId:null,isPeriodic:"Interval"===r,delay:"Timeout"===r||"Interval"===r?s[1]||0:null,args:s},l=c.scheduleMacroTask(e,s[0],u,i,a);if(!l)return l;var p=l.data.handleId;return p.ref&&p.unref&&(l.ref=p.ref.bind(p),l.unref=p.unref.bind(p)),l}return n.apply(t,s)}}),c=o.patchMethod(t,n,function(e){return function(n,r){var o=r[0];o&&"string"==typeof o.type?(o.cancelFn&&o.data.isPeriodic||0===o.runCount)&&o.zone.cancelTask(o):e.apply(t,r)}})}var o=n(3);e.patchTimer=r}])}).call(this,void 0)},{}],9:[function(t,e,n){var r=t("../patching/patchUtils"),o=t("../lib/utils");e.exports=function(t,e){t.decorator("$compile",["$delegate","$injector",function(t,n){function i(){var n=e.startTrace(c,s,{enableStackFrames:!1});try{var r=t.apply(this,arguments)}finally{o.isUndefined(n)||n.end()}return r}var a=["$compile","compile"],s="template.$compile",c=a.join(".");return r._copyProperties(t,i),i}])}},{"../lib/utils":28,"../patching/patchUtils":29}],10:[function(t,e,n){function r(t){var e,n;return"string"==typeof t[0]?n=t[0]:"function"==typeof t[0]&&(n=t[0].name),"object"==typeof t[1]&&(e=t[1].$scope),{scope:e,name:n}}var o=t("../lib/utils");e.exports=function(t,e){t.decorator("$controller",["$delegate","$injector",function(t,n){return function(){var n=Array.prototype.slice.call(arguments),i=r(n);if(i.name){var a,s="$controller."+i.name,c="app.$controller",u=e.startTrace(s,c,{enableStackFrames:!1});try{a=t.apply(this,arguments)}finally{o.isUndefined(u)||u.end()}}else a=t.apply(this,arguments);return a}}])}},{"../lib/utils":28}],11:[function(t,e,n){function r(t){return null==t?null:(t.exp?t=t.exp:t.name&&(t=t.name),t.toString())}var o=t("../lib/utils");e.exports=function(t,e){"use strict";t.decorator("ngRepeatDirective",["$delegate","$injector",function(t,n){var i=t[0],a=i.compile;return i.compile=function(){var t=a.apply(this,arguments);return function(){var n=arguments[0],i=n.$watchCollection;n.$watchCollection=function(t,n){var a=r(t);"function"==typeof n&&(arguments[1]=function(t){var r="";if(null!=a){var i=Array.isArray(t)?"["+t.length+"]":"";r=a+i}var s="ngRepeat "+r,c="template.ngRepeat",u=e.startTrace(s,c,{enableStackFrames:!1}),l=n.apply(this,arguments);return o.isUndefined(u)||u.end(),l}),i.apply(this,arguments)};var a=t.apply(this,arguments);return n.$watchCollection=i,a}},t}])}},{"../lib/utils":28}],12:[function(t,e,n){function r(t,e,n){this.config=function(t){t&&e.setConfig(t)},this.version="v3.1.2",this.install=function(){t.warn("$opbeatProvider.install is deprecated!")},this.$get=[function(){return{getConfig:function(){return e},captureException:function(e,r){return e instanceof Error?void n.processError(e,r):void t.warn("Can't capture exception. Passed exception needs to be an instanceof Error")},setUserContext:function(t){e.set("context.user",t)},setExtraContext:function(t){e.set("context.extra",t)}}}]}function o(t){t.decorator("$exceptionHandler",["$delegate","$opbeat",function(t,e){return function(n,r){return e.captureException(n),t(n,r)}}])}function i(e,n){o(e),s(e,n),c(e,n),u(e,n);var r=t("./directivesPatch");r(e,n)}function a(t,e,n,o,a){function s(r){function o(r,o){if(!n.get("performance.enable"))return void e.debug("Performance monitoring is disable");e.debug("Route change started");var i;i=o.$$route?o.$$route.originalPath:o.name,(""===i||"undefined"==typeof i)&&(i="/"),t.startTransaction(i,"transaction")}n.isPlatformSupport()&&(n.set("isInstalled",!0),r.$on("$routeChangeStart",o),r.$on("$stateChangeStart",o))}function c(e){n.isPlatformSupport()&&i(e,t)}window.angular.module("ngOpbeat",[]).provider("$opbeat",new r(e,n,a)).config(["$provide",c]).run(["$rootScope",s]),window.angular.module("opbeat-angular",["ngOpbeat"])}var s=t("./controllerPatch"),c=t("./compilePatch"),u=t("./rootScopePatch");e.exports=a},{"./compilePatch":9,"./controllerPatch":10,"./directivesPatch":11,"./rootScopePatch":14}],13:[function(t,e,n){function r(){var t=new i,e=new o(t).services;return e}var o=t("./serviceContainer"),i=t("../common/serviceFactory");r()},{"../common/serviceFactory":18,"./serviceContainer":15}],14:[function(t,e,n){function r(t,e){var n="getPrototypeOf"in Object?Object.getPrototypeOf(t):t.__proto__,r=n.$digest;return n.$digest=function(){var t=e.startTrace("$scope.$digest","app.$digest",{enableStackFrames:!1}),n=r.apply(this,arguments);return t&&t.end(),n},t}e.exports=function(t,e){t.decorator("$rootScope",["$delegate","$injector",function(t,n){return r(t,e)}])}},{}],15:[function(t,e,n){function r(t){this.serviceFactory=t,this.services={};var e=this.services.configService=this.serviceFactory.getConfigService(),n=this.services.logger=this.serviceFactory.getLogger(),r=new s;r.patchAll();var c=this.services.zoneService=this.createZoneService(),u=this.services.transactionService=new i(c,this.services.logger,e);if(!e.isPlatformSupport())return o(u,this.services.logger,e,c),void this.services.logger.debug("Platform is not supported.");if(this.scheduleTransactionSend(),"undefined"==typeof window.angular)throw new Error("AngularJS is not available. Please make sure you load opbeat-angular after AngularJS.");if(a.isUndefined(window.opbeatApi)&&(window.opbeatApi={}),window.opbeatApi.subscribeToTransactions=u.subscribe.bind(u),!a.isUndefined(window.opbeatApi.onload)){var l=window.opbeatApi.onload;l.forEach(function(t){try{t()}catch(e){n.error(e)}})}this.patchAngularBootstrap(),this.services.exceptionHandler=this.serviceFactory.getExceptionHandler(),o(u,n,e,c,this.services.exceptionHandler)}var o=t("./ngOpbeat"),i=t("../transaction/transaction_service"),a=t("../lib/utils"),s=t("../patching/patchingService");r.prototype.createZoneService=function(){var e=this.services.logger;"undefined"==typeof window.Zone&&t("zone.js");var n=t("../transaction/zone_service");return new n(window.Zone.current,e,this.services.configService)},r.prototype.scheduleTransactionSend=function(){var t=this.services.logger,e=this.serviceFactory.getOpbeatBackend(),n=this;setInterval(function(){var r=n.services.transactionService.getTransactions();0!==r.length&&(t.debug("Sending Transactions to opbeat.",r.length),e.sendTransactions(r),n.services.transactionService.clearTransactions())},5e3)},r.prototype.patchAngularBootstrap=function(){var t=this.services.zoneService,e="NG_DEFER_BOOTSTRAP!",n=new RegExp("^"+e+".*");if(n.test(window.name)){var r;Object.defineProperty(window.angular,"resumeBootstrap",{get:function(){return function(e){return t.zone.run(function(){r.call(window.angular,e)})}},set:function(t){r=t}})}else window.name=e+window.name,window.angular.resumeDeferredBootstrap=function(){return t.zone.run(function(){var t=window.angular.resumeBootstrap;return t.call(window.angular)})},window.addEventListener("beforeunload",function(){n.test(window.name)&&(window.name=window.name.substring(e.length))})},e.exports=r},{"../lib/utils":28,"../patching/patchingService":30,"../transaction/transaction_service":34,"../transaction/zone_service":35,"./ngOpbeat":12,"zone.js":8}],16:[function(t,e,n){e.exports={createValidFrames:function(t){var e=[];return Array.isArray(t)&&(e=t.filter(function(t){return"undefined"!=typeof t.filename&&"undefined"!=typeof t.lineno})),e}}},{}],17:[function(t,e,n){function r(t,e,n){this._logger=e,this._transport=t,this._config=n}function o(t){var e=i(t,c);return Object.keys(e).map(function(t){var n=e[t][0],r=n._start;n.transaction?r-=n.transaction._start:r=0;var o={},i=u.createValidFrames(n.frames);return i.length>0&&(o._frames=i),{transaction:n.transaction.name,signature:n.signature,kind:n.type,timestamp:n.transaction._startStamp.toISOString(),parents:n.ancestors(),extra:o,_group:t}}).sort(function(t,e){return t.start_time-e.start_time})}function i(t,e){var n={};return t.forEach(function(t){var r=e(t);r in n?n[r].push(t):n[r]=[t],t._traceGroup=r}),n}function a(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes())}function s(t){return[a(t._startStamp).getTime(),t.name,t.result,t.type].join("-")}function c(t){var e=t.ancestors().map(function(t){return t.signature}).join(",");return[a(t.transaction._startStamp).getTime(),t.transaction.name,e,t.signature,t.type].join("-")}var u=t("./backend_utils");e.exports=r,r.prototype.sendError=function(t){this._config.isValid()?(t.stacktrace.frames=u.createValidFrames(t.stacktrace.frames),this._transport.sendError(t)):this._logger.debug("Config is not valid")},r.prototype.groupSmallContinuouslySimilarTraces=function(t,e){var n=t.duration(),r=[],o=1;return t.traces.forEach(function(i,a){if(0===r.length)r.push(i);else{var s=r[r.length-1],c=s.type===i.type&&s.signature===i.signature&&i.duration()/n<e&&(i._start-s._end)/n<e,u=t.traces.length===a+1;c&&(o++,s._end=i._end,s.calcDiff()),o>1&&(!c||u)&&(s.signature=o+"x "+s.signature,o=1),c||u||r.push(i)}}),r},r.prototype.sendTransactions=function(t){var e=this;if(this._config.isValid()){t.forEach(function(t){if(t.traces.sort(function(t,e){return t._start-e._start}),e._config.get("performance.groupSimilarTraces")){var n=e._config.get("performance.similarTraceThreshold");t.traces=e.groupSmallContinuouslySimilarTraces(t,n)}});var n=t.filter(function(t){return!t.isUseless}),r=this._formatTransactions(n);return this._transport.sendTransaction(r)}this._logger.debug("Config is not valid")},r.prototype._formatTransactions=function(t){var e=this.groupTransactions(t),n=[].concat.apply([],t.map(function(t){return t.traces})),r=o(n),i=this.getRawGroupedTracesTimings(n,r);return{transactions:e,traces:{groups:r,raw:i}}},r.prototype.groupTransactions=function(t){var e=i(t,s);return Object.keys(e).map(function(t){var n=e[t][0],r=e[t].map(function(t){return t.duration()});return{transaction:n.name,result:n.result,kind:n.type,timestamp:a(n._startStamp).toISOString(),durations:r}})},r.prototype.getRawGroupedTracesTimings=function(t,e){var n=function(t,e){var n=0,r=c(e);return t.forEach(function(t,e){t._group===r&&(n=e)}),n},r=this,o=i(t,function(t){return t.transaction.name+"|"+t.transaction._start});return Object.keys(o).map(function(t){var i=o[t],a=i[0].transaction,s=[a.duration()];return i.forEach(function(t){var o=n(e,t),i=t._start-a._start;i>a.duration()?r._logger.debug("%c -- opbeat.instrumentation.getRawGroupedTracesTimings.error.relativeTraceStartLargerThanTransactionDuration","color: #ff0000",i,a._start,a.duration(),{trace:t,transaction:a}):0>i?r._logger.debug("%c -- opbeat.instrumentation.getRawGroupedTracesTimings.error.negativeRelativeTraceStart!","color: #ff0000",i,t._start,a._start,t):t.duration()>a.duration()?r._logger.debug("%c -- opbeat.instrumentation.getRawGroupedTracesTimings.error.traceDurationLargerThanTranscationDuration","color: #ff0000",t.duration(),a.duration(),{trace:t,transaction:a}):s.push([o,i,t.duration()])}),s})}},{"./backend_utils":16}],18:[function(t,e,n){function r(){this.services={}}var o=t("../backend/opbeat_backend"),i=t("loglevel"),a=t("../lib/config"),s=t("../lib/utils"),c=t("../lib/transport"),u=t("../exceptions/exceptionHandler");r.prototype.getOpbeatBackend=function(){if(s.isUndefined(this.services.OpbeatBackend)){var t=this.getLogger(),e=this.getConfigService(),n=this.getTransport();this.services.OpbeatBackend=new o(n,t,e)}return this.services.OpbeatBackend},r.prototype.getTransport=function(){return s.isUndefined(this.services.Transport)&&(this.services.Transport=c),this.services.Transport},r.prototype.setLogLevel=function(t,e){e.get("debug")===!0&&"trace"!==e.config.logLevel?t.setLevel("debug",!1):t.setLevel(e.get("logLevel"),!1)},r.prototype.getLogger=function(){if(s.isUndefined(this.services.Logger)){var t=this.getConfigService(),e=this;e.setLogLevel(i,t),t.subscribeToChange(function(n){e.setLogLevel(i,t)}),this.services.Logger=i}return this.services.Logger},r.prototype.getConfigService=function(){return s.isUndefined(this.services.ConfigService)&&(a.init(),this.services.ConfigService=a),this.services.ConfigService},r.prototype.getExceptionHandler=function(){if(s.isUndefined(this.services.ExceptionHandler)){var t=new u(this.getOpbeatBackend());this.services.ExceptionHandler=t}return this.services.ExceptionHandler},e.exports=r},{"../backend/opbeat_backend":17,"../exceptions/exceptionHandler":21,"../lib/config":24,"../lib/transport":27,"../lib/utils":28,loglevel:3}],19:[function(t,e,n){function r(){this.subscriptions=[]}r.prototype.subscribe=function(t){var e=this;return this.subscriptions.push(t),function(){var n=e.subscriptions.indexOf(t);n>-1&&e.subscriptions.splice(n,1)}},r.prototype.applyAll=function(t,e){this.subscriptions.forEach(function(n){try{n.apply(t,e)}catch(r){console.log(r,r.stack)}},this)},e.exports=r},{}],20:[function(t,e,n){var r=t("es6-promise").Promise,o=t("../lib/utils"),i=t("../lib/fileFetcher");e.exports={_findSourceMappingURL:function(t){var e=/\/\/[#@] ?sourceMappingURL=([^\s'"]+)[\s]*$/.exec(t);return e&&e[1]?e[1]:null},getFileSourceMapUrl:function(t){var e,n=this;return t?(e=t.split("/").length>1?t.split("/").slice(0,-1).join("/")+"/":"/",new r(function(r,o){i.getFile(t).then(function(t){var i=n._findSourceMappingURL(t);i?(i=e+i,r(i)):o("no sourceMapUrl")},o)})):r.reject("no fileUrl")},getExceptionContexts:function(t,e){return t&&e?new r(function(n,r){i.getFile(t).then(function(t){e-=1;var i=t.split("\n"),a=5,s=5,c={preContext:[],contextLine:null,postContext:[]};if(i.length){var u;if(u=t.indexOf("<html")>-1?!1:this.isSourceMinified(t))return r();for(var l=Math.max(0,e-a-1),p=Math.min(i.length,e-1),f=l;p>=f;++f)o.isUndefined(i[f])||c.preContext.push(i[f]);c.contextLine=i[e];for(var h=Math.min(i.length,e+1),d=Math.min(i.length,e+s),g=h;d>=g;++g)o.isUndefined(i[g])||c.postContext.push(i[g])}var v=1e3;c.contextLine.length>v&&r("aborting generating contexts, as line is over 1000 chars"),c.preContext.forEach(function(t){t.length>v&&r("aborting generating contexts, as preContext line is over 1000 chars")}),c.postContext.forEach(function(t){t.length>v&&r("aborting generating contexts, as postContext line is over 1000 chars")}),n(c)}.bind(this),r)}.bind(this)):r.reject("no line or url")},isSourceMinified:function(t){var e,n=50,r=5,o=250,i=0,a=0,s=0,c=0,u=!1;if(!t)return!1;for(t=t.replace(/\/\*[\S\s]*?\*\/|\/\/(.+|\n)/g,"");s++<n&&(i=t.indexOf("\n",a),-1!==i);){if(/^\s+/.test(t.slice(a,i))&&c++,i-a>o){u=!0;break}a=i+1}return e=r>c/s*100||u}}},{"../lib/fileFetcher":25,"../lib/utils":28,"es6-promise":2}],21:[function(t,e,n){var r=t("es6-promise").Promise,o=t("./stacktrace"),i=t("./frames"),a=function(t){this._opbeatBackend=t};a.prototype.install=function(){window.onerror=function(t,e,n,r,o){this._processError(o,t,e,n,r)}.bind(this)},a.prototype.uninstall=function(){window.onerror=null},a.prototype.processError=function(t){return this._processError(t)},a.prototype._processError=function(t,e,n,a,s){if("Script error."!==e||n){var c={message:t?t.message:e,type:t?t.name:null,fileurl:n||null,lineno:a||null,colno:s||null};c.type||c.message.indexOf(":")>-1&&(c.type=c.message.split(":")[0]);var u;u=t?o.fromError(t):new r(function(t,e){t([{fileName:n,lineNumber:a,columnNumber:s}])});var l=this;return u.then(function(t){return c.stack=t||[],i.stackInfoToOpbeatException(c).then(function(t){var e=i.processOpbeatException(t);l._opbeatBackend.sendError(e)})})["catch"](function(){})}},e.exports=a},{"./frames":22,"./stacktrace":23,"es6-promise":2}],22:[function(t,e,n){var r=t("es6-promise").Promise,o=t("../lib/logger"),i=t("../lib/config"),a=t("../lib/utils"),s=t("./context"),c=t("./stacktrace"),u=function(t){for(var e=r.resolve(),n=[],o=0;o<t.length;++o)n.push(e=e.then(t[o]));return r.all(n)};e.exports={getFramesForCurrent:function(){return c.get().then(function(t){var e=t.map(function(t){return this.buildOpbeatFrame.bind(this,t)}.bind(this)),n=u(e);return n.then(function(t){return t})}.bind(this))},buildOpbeatFrame:function(t){return new r(function(e,n){if(!t.fileName&&!t.lineNumber)return e({});if(!t.columnNumber&&!t.lineNumber)return e({});var r=this.cleanFilePath(t.fileName),o=this.filePathToFileName(r);this.isFileInline(r)&&(o="(inline script)");var i={filename:o,lineno:t.lineNumber,colno:t.columnNumber,"function":t.functionName||"<anonymous>",abs_path:t.fileName,in_app:this.isFileInApp(r)},a=s.getFileSourceMapUrl(r);a.then(function(t){i.sourcemap_url=t,e(i)},function(){var n=this.cleanFilePath(t.fileName),r=s.getExceptionContexts(n,t.lineNumber);r.then(function(t){i.pre_context=t.preContext,i.context_line=t.contextLine,i.post_context=t.postContext,e(i)})["catch"](function(){e(i)})}.bind(this))}.bind(this))},stackInfoToOpbeatException:function(t){return new r(function(e,n){if(t.stack&&t.stack.length){var r=t.stack.map(function(t){return this.buildOpbeatFrame.bind(this,t)}.bind(this)),o=u(r);o.then(function(n){t.frames=n,t.stack=null,e(t)})}else e(t)}.bind(this))},processOpbeatException:function(t){var e,n=t.type,r=String(t.message)||"Script error",s=this.cleanFilePath(t.fileurl),c=this.filePathToFileName(s),u=t.frames||[];u&&u.length?u.reverse():c&&u.push({filename:c,lineno:t.lineno});var l={frames:u};if(!c&&u.length){var p=u[u.length-1];c=p.filename?p.filename:"(inline script)"}e=this.isFileInline(s)?"(inline script)":c;var f={message:n+": "+r,culprit:e,exception:{type:n,value:r},http:{url:window.location.href},stacktrace:l,user:i.get("context.user"),level:null,logger:null,machine:null};return f.extra=this.getBrowserSpecificMetadata(),i.get("context.extra")&&(f.extra=a.mergeObject(f.extra,i.get("context.extra"))),o.log("opbeat.exceptions.processOpbeatException",f),f},cleanFilePath:function(t){return t||(t=""),"<anonymous>"===t&&(t=""),t},filePathToFileName:function(t){var e=window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");return t.indexOf(e)>-1&&(t=t.replace(e+"/","")),t},isFileInline:function(t){return t?0===window.location.href.indexOf(t):!1},isFileInApp:function(t){var e=i.get("libraryPathPattern");return!RegExp(e).test(t)},getBrowserSpecificMetadata:function(){var t=a.getViewPortInfo(),e={environment:{utcOffset:(new Date).getTimezoneOffset()/-60,browserWidth:t.width,browserHeight:t.height,screenWidth:window.screen.width,screenHeight:window.screen.height,language:navigator.language,userAgent:navigator.userAgent,platform:navigator.platform},page:{referer:document.referrer,host:document.domain,location:window.location.href}};return e}}},{"../lib/config":24,"../lib/logger":26,"../lib/utils":28,"./context":20,"./stacktrace":23,"es6-promise":2}],23:[function(t,e,n){function r(t){return t.stack||t["opera#sourceloc"]}function o(t){return t.map(function(t){return t.functionName&&(t.functionName=i(t.functionName)),t})}function i(t){var e=t.split("/");return t=e.length>1?["Object",e[e.length-1]].join("."):e[0],t=t.replace(/.<$/gi,".<anonymous>"),t=t.replace(/^Anonymous function$/,"<anonymous>"),e=t.split("."),t=e.length>1?e[e.length-1]:e[0]}var a=t("error-stack-parser"),s=t("stack-generator"),c=t("es6-promise").Promise,u=t("../lib/utils"),l={filter:function(t){return-1===(t.functionName||"").indexOf("StackTrace$$")&&-1===(t.functionName||"").indexOf("ErrorStackParser$$")&&-1===(t.functionName||"").indexOf("StackGenerator$$")&&-1===(t.functionName||"").indexOf("opbeatFunctionWrapper")&&-1===(t.fileName||"").indexOf("opbeat-angular.js")&&-1===(t.fileName||"").indexOf("opbeat-angular.min.js")&&-1===(t.fileName||"").indexOf("opbeat.js")&&-1===(t.fileName||"").indexOf("opbeat.min.js")}};e.exports={get:function(t){try{throw new Error}catch(e){return r(e)?this.fromError(e,t):this.generateArtificially(t)}},generateArtificially:function(t){t=u.mergeObject(l,t);var e=s.backtrace(t);return"function"==typeof t.filter&&(e=e.filter(t.filter)),e=o(e),c.resolve(e)},fromError:function(t,e){return e=u.mergeObject(l,e),new c(function(n){var r=a.parse(t);"function"==typeof e.filter&&(r=r.filter(e.filter)),r=o(r),n(c.all(r.map(function(t){return new c(function(e){e(t)})})))})}}},{"../lib/utils":28,"error-stack-parser":1,"es6-promise":2,"stack-generator":6}],24:[function(t,e,n){function r(){this.config={},this.defaults={VERSION:"v3.1.2",apiHost:"intake.opbeat.com",isInstalled:!1,debug:!1,logLevel:"warn",orgId:null,appId:null,angularAppName:null,performance:{enable:!0,enableStackFrames:!1,groupSimilarTraces:!1,similarTraceThreshold:.05},libraryPathPattern:"(node_modules|bower_components|webpack)",context:{user:{},extra:null}},this._changeSubscription=new a}function o(t){var e={},n=/^data\-([\w\-]+)$/;if(t)for(var r=t.attributes,o=0;o<r.length;o++){var a=r[o];if(n.test(a.nodeName)){var s=a.nodeName.match(n)[1];s=i.arrayMap(s.split("-"),function(t,e){return e>0?t.charAt(0).toUpperCase()+t.substring(1):t}).join(""),e[s]=a.value||a.nodeValue}}return e}var i=t("./utils"),a=t("../common/subscription");r.prototype.init=function(){var t=s();this.setConfig(t)},r.prototype.get=function(t){return i.arrayReduce(t.split("."),function(t,e){return t[e]},this.config)},r.prototype.set=function(t,e){var n=t.split("."),r=n.length-1,o=this.config;i.arraySome(n,function(t,n){if("undefined"==typeof t)return!0;if(n===r)o[t]=e;else{var i=o[t]||{};o[t]=i,o=i}})},r.prototype.setConfig=function(t){t=t||{},this.config=i.merge({},this.defaults,this.config,t),this._changeSubscription.applyAll(this,[this.config])},r.prototype.subscribeToChange=function(t){return this._changeSubscription.subscribe(t)},r.prototype.isValid=function(){var t=["appId","orgId"],e=i.arrayMap(t,i.functionBind(function(t){return null===this.config[t]||void 0===this.config[t]},this));return-1===i.arrayIndexOf(e,!0)};var s=function(){var t=i.getCurrentScript(),e=o(t);return e};r.prototype.VERSION="v3.1.2",r.prototype.isPlatformSupport=function(){return"function"==typeof Array.prototype.forEach&&"function"==typeof JSON.stringify&&"function"==typeof Function.bind&&window.performance&&"function"==typeof window.performance.now&&i.isCORSSupported()},e.exports=new r},{"../common/subscription":19,"./utils":28}],25:[function(t,e,n){var r=t("simple-lru-cache"),o=t("./transport"),i=new r({maxSize:1e3});e.exports={getFile:function(t){var e=i.get(t);if("undefined"!=typeof e)return e;var n=o.getFile(t);return i.set(t,n),n}}},{"./transport":27,"simple-lru-cache":4}],26:[function(t,e,n){var r=t("./config"),o=[];e.exports={getLogStack:function(){return o},error:function(t,e){return this.log("%c "+t,"color: red",e)},warning:function(t,e){return this.log("%c "+t,"background-color: ffff00",e)},log:function(t,e){for(var n=new Array(arguments.length),i=0,a=arguments.length;a>i;i++)n[i]=arguments[i];var s=r.get("debug")===!0||"true"===r.get("debug"),c=window.console;return o.push({msg:t,data:n.slice(1)}),s&&c?"function"==typeof Function.prototype.bind?window.console.log.apply(window.console,n):Function.prototype.apply.call(window.console.log,window.console,n):void 0}}},{"./config":24}],27:[function(t,e,n){function r(t,e){i.log("opbeat.transport.sendToOpbeat",e);var n="https://"+a.get("apiHost")+"/api/v1/organizations/"+a.get("orgId")+"/apps/"+a.get("appId")+"/client-side/"+t+"/",r={"X-Opbeat-Client":"opbeat-js/"+a.get("VERSION")};return o(n,"POST","JSON",e,r)}function o(t,e,n,r,o){return new s(function(a,s){var c=new window.XMLHttpRequest;if(c.open(e,t,!0),c.timeout=1e4,"JSON"===n&&c.setRequestHeader("Content-Type","application/json"),o)for(var u in o)o.hasOwnProperty(u)&&c.setRequestHeader(u.toLowerCase(),o[u]);c.onreadystatechange=function(e){if(4===c.readyState){var n=c.status;if(0===n||n>399&&600>n){var r=new Error(t+" HTTP status: "+n);r.xhr=c,s(r),i.log("opbeat.transport.makeRequest.error",r)}else a(c.responseText),i.log("opbeat.transport.makeRequest.success")}},c.onerror=function(t){s(t),i.log("opbeat.transport.makeRequest.error",t)},"JSON"===n&&(r=JSON.stringify(r)),c.send(r)})}var i=t("./logger"),a=t("./config"),s=t("es6-promise").Promise;e.exports={sendError:function(t){return r("errors",t)},sendTransaction:function(t){return r("transactions",t)},getFile:function(t){return o(t,"GET","",{})}}},{"./config":24,"./logger":26,"es6-promise":2}],28:[function(t,e,n){function r(t){return null!==t&&"object"==typeof t}function o(t){return"function"==typeof t}var i=[].slice;e.exports={getViewPortInfo:function(){var t=document.documentElement,e=document.getElementsByTagName("body")[0],n=window.innerWidth||t.clientWidth||e.clientWidth,r=window.innerHeight||t.clientHeight||e.clientHeight;return{width:n,height:r}},mergeObject:function(t,e){var n,r={};for(n in t)r[n]=t[n];for(n in e)r[n]=e[n];return r},extend:function(t){return this.baseExtend(t,i.call(arguments,1),!1)},merge:function(t){return this.baseExtend(t,i.call(arguments,1),!0)},baseExtend:function a(t,e,n){for(var i=0,s=e.length;s>i;++i){var c=e[i];if(r(c)||o(c))for(var u=Object.keys(c),l=0,p=u.length;p>l;l++){var f=u[l],h=c[f];n&&r(h)?(r(t[f])||(t[f]=Array.isArray(h)?[]:{}),a(t[f],[h],!1)):t[f]=h}}return t},isObject:r,isFunction:o,arrayReduce:function(t,e,n){if(null==t)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var r=Object(t),o=r.length>>>0,i=0;if(!n){for(;o>i&&!(i in r);)i++;if(i>=o)throw new TypeError("Reduce of empty array with no initial value");n=r[i++]}for(;o>i;i++)i in r&&(n=e(n,r[i],i,r));return n},arraySome:function(t,e,n){if(null==t)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof e)throw new TypeError;var r=Object(t),o=r.length>>>0;n||(n=void 0);for(var i=0;o>i;i++)if(i in r&&e.call(n,r[i],i,r))return!0;return!1},arrayMap:function(t,e,n){var r,o,i;if(null==this)throw new TypeError(" this is null or not defined");var a=Object(t),s=a.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(r=n),o=new Array(s),i=0;s>i;){var c,u;i in a&&(c=a[i],u=e.call(r,c,i,a),o[i]=u),i++}return o},arrayIndexOf:function(t,e,n){var r;if(null==t)throw new TypeError('"arrayVal" is null or not defined');var o=Object(t),i=o.length>>>0;if(0===i)return-1;var a=+n||0;if(Math.abs(a)===1/0&&(a=0),a>=i)return-1;for(r=Math.max(a>=0?a:i-Math.abs(a),0);i>r;){if(r in o&&o[r]===e)return r;r++}return-1},functionBind:function(t,e){var n=Array.prototype.slice.call(arguments,2),r=function(){},o=function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))};return r.prototype=t.prototype,o.prototype=new r,o},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},isUndefined:function(t){return"undefined"==typeof t},isCORSSupported:function(){var t=new window.XMLHttpRequest;return"withCredentials"in t},getCurrentScript:function(){return document.currentScript||function(){var t=document.getElementsByTagName("script");return t[t.length-1]}()},generateUuid:function(){function t(t){var e=(Math.random().toString(16)+"000000000").substr(2,8);return t?"-"+e.substr(0,4)+"-"+e.substr(4,4):e}return t()+t(!0)+t(!0)+t()}}},{}],29:[function(t,e,n){function r(t){return"__opbeat_symbol__"+t}function o(t,e,n){for(var o=t;o&&!o.hasOwnProperty(e);)o=Object.getPrototypeOf(o);!o&&t[e]&&(o=t);var a,s=r(e);return o&&!(a=o[s])&&(a=o[s]=o[e],o[e]=i(e,n(a,s,e))),a}function i(t,e){try{return Function("f","return function "+t+"(){return f(this, arguments)}")(e)}catch(n){return function(){return e(this,arguments)}}}e.exports={patchFunction:function(t,e){},_copyProperties:function(t,e){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},wrapAfter:function(t,e){return function(){var n=t.apply(this,arguments);return e.apply(this,arguments),n}},wrapBefore:function(t,e){return function(){return e.apply(this,arguments),t.apply(this,arguments)}},wrap:function(t,e,n){return function(){e.apply(this,arguments);var r=t.apply(this,arguments);return n.apply(this,arguments),r}},argumentsToArray:function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e},opbeatSymbol:r,patchMethod:o}},{}],30:[function(t,e,n){function r(){}var o=t("./patchUtils"),i=o.opbeatSymbol("url"),a=o.opbeatSymbol("method"),s=o.opbeatSymbol("isAsync");r.prototype.patchXMLHttpRequest=function(){o.patchMethod(window.XMLHttpRequest.prototype,"open",function(t){return function(e,n){e[a]=n[0],e[i]=n[1],e[s]=n[2],t.apply(e,n)}})},r.prototype.patchAll=function(){this.patchXMLHttpRequest()},e.exports=r},{"./patchUtils":29}],31:[function(t,e,n){function r(t,e,n,r){this.transaction=t,this.signature=e,this.type=n,this.ended=!1,this._parent=null,this._diff=null,this._end=null,this._start=window.performance.now(),this._isFinish=new o(function(t,e){this._markFinishedFunc=t}.bind(this)),
(s.isUndefined(r)||null==r)&&(r={});var i=r.enableStackFrames;i?this.getTraceStackFrames(function(t){t&&(this.frames=t.reverse()),this._markFinishedFunc()}.bind(this)):this._markFinishedFunc()}var o=t("es6-promise").Promise,i=t("../exceptions/frames"),a=t("./traceCache"),s=t("../lib/utils");r.prototype.calcDiff=function(){this._end&&this._start&&(this._diff=this._end-this._start)},r.prototype.end=function(){this._end=window.performance.now(),this.calcDiff(),this.ended=!0,s.isUndefined(this.transaction)||"function"!=typeof this.transaction._onTraceEnd||this.transaction._onTraceEnd(this)},r.prototype.duration=function(){return this.ended&&this._start?(this._diff=this._end-this._start,parseFloat(this._diff)):null},r.prototype.startTime=function(){return this.ended&&this.transaction.ended?this._start:null},r.prototype.ancestors=function(){var t=this.parent();return t?[t.signature]:[]},r.prototype.parent=function(){return this._parent},r.prototype.setParent=function(t){this._parent=t},r.prototype.getFingerprint=function(){for(var t=[this.transaction.name,this.signature,this.type],e=this._parent;e;)t.push(e.signature),e=e._parent;return t.join("-")},r.prototype.getTraceStackFrames=function(t){var e=this.getFingerprint(),n=a.get(e);n?t(n):i.getFramesForCurrent().then(function(n){a.set(e,n),t(n)})["catch"](function(){t(null)})},e.exports=r},{"../exceptions/frames":22,"../lib/utils":28,"./traceCache":32,"es6-promise":2}],32:[function(t,e,n){var r=t("simple-lru-cache");e.exports=new r({maxSize:5e3})},{"simple-lru-cache":4}],33:[function(t,e,n){function r(t){var e=null;return t.forEach(function(t){e||(e=t),e&&e._start>t._start&&(e=t)}),e}function o(t){var e=null;return t.forEach(function(t){e||(e=t),e&&e._end<t._end&&(e=t)}),e}var i=t("./trace"),a=t("es6-promise").Promise,s=t("../lib/utils"),c=function(t,e,n){this.metadata={},this.name=t,this.type=e,this.ended=!1,this._markDoneAfterLastTrace=!1,this._isDone=!1,this._options=n,"undefined"==typeof n&&(this._options={}),this.traces=[],this._activeTraces={},this._scheduledTasks={},this.events={},a.call(this.donePromise=Object.create(a.prototype),function(t,e){this._resolve=t,this._reject=e}.bind(this.donePromise)),this._rootTrace=this.startTrace("transaction","transaction",{enableStackFrames:!1}),this._startStamp=new Date,this._start=this._rootTrace._start,this.duration=this._rootTrace.duration.bind(this._rootTrace),this.nextId=0};c.prototype.startTrace=function(t,e,n){var r="undefined"==typeof n?{}:n;r.enableStackFrames=this._options.enableStackFrames===!0&&r.enableStackFrames!==!1;var o=new i(this,t,e,r);return o.traceId=this.nextId,this.nextId++,this._rootTrace&&(o.setParent(this._rootTrace),this._activeTraces[o.traceId]=o),o},c.prototype.recordEvent=function(t){var e=this.events[t.name];s.isUndefined(e)?(e={name:t.name,start:t.start,end:t.end,time:t.end-t.start,count:0},this.events[e.name]=e):(e.time+=t.end-t.start,e.count++,e.end=t.end)},c.prototype.isFinished=function(){return 0===Object.keys(this._scheduledTasks).length&&0===Object.keys(this._activeTraces).length},c.prototype.detectFinish=function(){this.isFinished()&&this.end()},c.prototype.end=function(){return this.ended?void 0:(this.ended=!0,this._rootTrace.end(),this.isFinished()===!0&&this._finish(),this.donePromise)},c.prototype.addTask=function(t){this._scheduledTasks[t]=t},c.prototype.removeTask=function(t){delete this._scheduledTasks[t]},c.prototype.addEndedTraces=function(t){this.traces=this.traces.concat(t)},c.prototype._onTraceEnd=function(t){this.traces.push(t),t._scheduledTasks=Object.keys(this._scheduledTasks),delete this._activeTraces[t.traceId]},c.prototype._finish=function(){if(this._alreadFinished!==!0){this._alreadFinished=!0;for(var t in this.events){var e=this.events[t],n=new i(this,t,t,this._options);n.ended=!0,n._start=e.start,n._diff=e.time,n._end=e.end,n.setParent(this._rootTrace),this.traces.push(n)}this._adjustStartToEarliestTrace(),this._adjustEndToLatestTrace();var r=this,o=r.traces.map(function(t){return t._isFinish});a.all(o).then(function(){r.donePromise._resolve(r)})}},c.prototype._adjustEndToLatestTrace=function(){var t=o(this.traces);"undefined"!=typeof t&&(this._rootTrace._end=t._end,this._rootTrace.calcDiff())},c.prototype._adjustStartToEarliestTrace=function(){var t=r(this.traces);t&&(this._rootTrace._start=t._start,this._rootTrace.calcDiff(),this._start=this._rootTrace._start)},e.exports=c},{"../lib/utils":28,"./trace":31,"es6-promise":2}],34:[function(t,e,n){function r(t,e,n){function r(t){"XMLHttpRequest.send"===t.source&&t.trace&&!t.trace.ended&&t.trace.end()}function o(t){if("XMLHttpRequest.send"===t.source){var e=c.startTrace(t.XHR.method+" "+t.XHR.url,"ext.HttpRequest",{enableStackFrames:!1});t.trace=e}c.addTask(t.taskId)}function i(t){c.removeTask(t.taskId),c.detectFinish()}function s(t){c.removeTask(t.taskId),c.detectFinish()}this._config=n,"undefined"==typeof n&&e.debug("TransactionService: config is not provided"),this._queue=[],this._logger=e,this._zoneService=t,this.transactions=[],this.nextId=1,this.taskMap={},this._queue=[],this._subscription=new a;var c=this;t.spec.onBeforeInvokeTask=r,t.spec.onScheduleTask=o,t.spec.onInvokeTask=i,t.spec.onCancelTask=s}var o=t("./transaction"),i=t("../lib/utils"),a=t("../common/subscription");r.prototype.getTransaction=function(t){return this.transactions[t]},r.prototype.createTransaction=function(t,e){},r.prototype.startTransaction=function(t,e){var n=this,r=this._config.get("performance");if(r.enable){var i=this._zoneService.get("transaction");if("undefined"==typeof i||i.ended?(i=new o(t,e,r),this._zoneService.set("transaction",i)):(i.name=t,i.type=e,i._options=r),-1===this.transactions.indexOf(i)){this._logger.debug("TransactionService.startTransaction",i);var a=i.donePromise;a.then(function(t){n._logger.debug("TransactionService transaction finished",i),n.add(i),n._subscription.applyAll(n,[i]);var e=n.transactions.indexOf(i);-1!==e&&n.transactions.splice(e,1)}),this.transactions.push(i)}return i}},r.prototype.startTrace=function(t,e,n){var r=this._config.get("performance");if(r.enable){var a=this._zoneService.get("transaction");i.isUndefined(a)||a.ended?(a=new o("ZoneTransaction","transaction",r),this._zoneService.set("transaction",a),this._logger.debug("TransactionService.startTrace - ZoneTransaction",t,e)):this._logger.debug("TransactionService.startTrace",t,e);var s=a.startTrace(t,e,n);return s}},r.prototype.isLocked=function(){return!1},r.prototype.add=function(t){var e=this._config.get("performance");e.enable&&(this._queue.push(t),this._logger.debug("TransactionService.add",t))},r.prototype.getTransactions=function(){return this._queue},r.prototype.clearTransactions=function(){this._queue=[]},r.prototype.subscribe=function(t){return this._subscription.subscribe(t)},r.prototype.addTask=function(t){var e=this._zoneService.get("transaction");i.isUndefined(e)||e.ended||(e.addTask(t),this._logger.debug("TransactionService.addTask",t))},r.prototype.removeTask=function(t){var e=this._zoneService.get("transaction");i.isUndefined(e)||e.ended||(e.removeTask(t),this._logger.debug("TransactionService.removeTask",t))},r.prototype.detectFinish=function(){var t=this._zoneService.get("transaction");i.isUndefined(t)||t.ended||(t.detectFinish(),this._logger.debug("TransactionService.detectFinish"))},e.exports=r},{"../common/subscription":19,"../lib/utils":28,"./transaction":33}],35:[function(t,e,n){function r(t,e,n){function r(){}this.events=new o;var i=0;this.events=new o;var f=this.spec={onScheduleTask:r,onBeforeInvokeTask:r,onInvokeTask:r,onCancelTask:r,onHandleError:r},h={name:"opbeatRootZone",onScheduleTask:function(t,n,r,o){if("eventTask"===o.type&&"dummyImmediateEvent"===o.data.eventName)return o.data.handler(o.data),o;var l=o.data&&o.data.target;if(l&&"undefined"==typeof o.data.target[p]&&(o.data.target[p]={registeredEventListeners:{}}),e.trace("zoneservice.onScheduleTask",o.source," type:",o.type),"macroTask"===o.type){e.trace("Zone: ",r.name);var h=i++,d={taskId:o.source+h,source:o.source,type:o.type};"setTimeout"===o.source?0===o.data.args[1]&&(o[a]=d,f.onScheduleTask(d)):"requestAnimationFrame"===o.source?(o[a]=d,f.onScheduleTask(d)):o.source===u&&(d.XHR={resolved:!1,send:!1,url:o.data.target[s],method:o.data.target[c]},o.data.target.addEventListener("dummyImmediateEvent",function(t){"undefined"!=typeof t.target[p]&&(o.data.target[p]=t.target[p])}),o.data.target[p].task=d,o.data.target[p].typeName="XMLHttpRequest",f.onScheduleTask(d))}else"eventTask"!==o.type||!l||"readystatechange"!==o.data.eventName&&"load"!==o.data.eventName||(o.data.target[p].registeredEventListeners[o.data.eventName]={resolved:!1});var g=t.scheduleTask(r,o);return g},onInvokeTask:function(t,n,r,o,i,s){e.trace("zoneservice.onInvokeTask",o.source," type:",o.type);var c,h=o.data&&o.data.target;if(h&&"XMLHttpRequest"===o.data.target[p].typeName){var d=o.data.target[p];e.trace("opbeatData",d);var g=d.task;g&&"readystatechange"===o.data.eventName&&o.data.target.readyState===l.DONE?(d.registeredEventListeners.readystatechange.resolved=!0,f.onBeforeInvokeTask(g)):g&&"load"===o.data.eventName&&"load"in d.registeredEventListeners?d.registeredEventListeners.load.resolved=!0:g&&o.source===u&&(g.XHR.resolved=!0),c=t.invokeTask(r,o,i,s),g&&(!d.registeredEventListeners.load||d.registeredEventListeners.load.resolved)&&d.registeredEventListeners.readystatechange.resolved&&g.XHR.resolved&&f.onInvokeTask(g)}else!o[a]||"requestAnimationFrame"!==o.source&&"setTimeout"!==o.source?c=t.invokeTask(r,o,i,s):(f.onBeforeInvokeTask(o[a]),c=t.invokeTask(r,o,i,s),f.onInvokeTask(o[a]));return c},onCancelTask:function(t,e,n,r){var o;return"macroTask"===r.type&&(r.source===u?(o=r.data.target[p].task,f.onCancelTask(o)):!r[a]||"requestAnimationFrame"!==r.source&&"setTimeout"!==r.source||(o=r[a],f.onCancelTask(o))),t.cancelTask(n,r)}};this.outer=t,this.zone=t.fork(h)}var o=t("../common/subscription"),i=t("../patching/patchUtils"),a=i.opbeatSymbol("taskData"),s=i.opbeatSymbol("url"),c=i.opbeatSymbol("method"),u="XMLHttpRequest.send",l=window.XMLHttpRequest,p=i.opbeatSymbol("opbeatData");r.prototype.set=function(t,e){window.Zone.current._properties[t]=e},r.prototype.get=function(t){return window.Zone.current.get(t)},r.prototype.getCurrentZone=function(){return window.zone},r.prototype.runOuter=function(t){return this.outer.run(t)},e.exports=r},{"../common/subscription":19,"../patching/patchUtils":29}]},{},[13]);